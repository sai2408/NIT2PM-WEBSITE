<html>
    <head>
        <title>Web Page</title>
        <style>
            img{
                height : 100%;
                width : 100%;
            }
            .header{
                height : 100px;
                background-color: rgb(161, 159, 159);
                border-radius: 10px;
            }
            .logo{
                margin-top:10px;
                margin-left : 5px;
                width : 100px;
                height :80px;
            }
            .btn1{
                position: absolute;
                height : 50px;
                width :50px;
                top : 35px;
                right:30px;
                border-radius: 10px;
                z-index:1;
            }
            .btn2{
                display : none;
                position: absolute;
                top : 37px;
                right : 120px;
                background-color: black;
                padding-left:50px;
                padding-right : 50px;
                padding-top : 15px;
                padding-bottom: 15px;
                color: white;
                border-radius: 10px;
            }
            .btn2:hover{
                border-color: white;
                box-shadow: 0px 0px 30px white;
            }
            .btn3{
                display: none;
                position: absolute;
                top : 37px;
                right : 300px;
                background-color: black;
                padding-left:50px;
                padding-right : 50px;
                padding-top : 15px;
                padding-bottom: 15px;
                color: white;
                border-radius: 10px;
            }
            .btn3:hover{
                border-color: white;
                box-shadow: 0px 0px 30px white;
            }
            .btn4{
                display: none;
                position: absolute;
                top : 37px;
                right : 500px;
                background-color: black;
                padding-left:50px;
                padding-right : 50px;
                padding-top : 15px;
                padding-bottom: 15px;
                color: white;
                border-radius: 10px;
            }
            .btn4:hover{
                border-color: white;
                box-shadow: 0px 0px 30px white;
            }
            /* Title Styling */
            .x-container{
                display : none;
                background-color: rgb(214, 224, 221);
                margin-left : 20px;
                margin-right : 20px;
                padding-left : 30px;
                padding-right:30px;
                padding-bottom: 40px;
            }
            .x-title {
                position: relative;
                left : 40%;
                top:10px;
                font-size: 24px;
                color: #0d0c0c;
                margin-top:20px;
                margin-bottom: 20px;
                text-align: center;
                border: solid;
                width :200px;
                padding-top:10px;
                padding-bottom : 10px;
            }

            /* Input Fields */
            .x-input {
                width: 100%;
                padding: 10px;
                margin: 10px 0;
                border: 1px solid #ccc;
                border-radius: 5px;
                font-size: 16px;
            }

            /* Signup Button */
            .x-button {
                width: 100%;
                padding: 10px;
                background: #007bff;
                color: #fff;
                border: none;
                border-radius: 5px;
                font-size: 18px;
                cursor: pointer;
                margin-top: 10px;
            }

            .x-button:hover {
                background: #0056b3;
            }
            /* Styling the login container */
            .y-container {
                display : none;
                width: 100%;
                max-width: 350px;
                margin: 60px auto;
                background: #e6dddd;
                padding: 20px;
                border-radius: 10px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                text-align: center;
            }

            /* Title Styling */
            .y-title {
                font-size: 24px;
                color: #333;
                margin-bottom: 20px;
            }           

            /* Input Fields */
            .y-input {
                width: 100%;
                padding: 10px;
                margin: 10px 0;
                border: 1px solid #ccc;
                border-radius: 5px;
                font-size: 16px;
            }

            /* Login Button */
            .y-button {
                width: 100%;
                padding: 10px;
                background: #28a745;
                color: #fff;
                border: none;
                border-radius: 5px;
                font-size: 18px;
                cursor: pointer;
                margin-top: 10px;
            }
            .y-button:hover { 
                background: #218838; 
            }
            /* Container for the shopping page */
            .shop-container {
                display :block;
                width: 90%;
                max-width: 1200px;
                margin: 20px auto;
                text-align: center;
            }

            /* Grid layout for products */
            .shop-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
            }

            /* Individual product card */
            .shop-product {
                background: #fff;
                padding: 15px;
                border-radius: 10px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                transition: transform 0.3s ease;
            }

            .shop-product:hover {
                transform: scale(1.05);
            }

            /* Product image */
            .shop-img {
                width: 100%;
                height: 200px;
                object-fit: cover;
                border-radius: 10px;
            }

            /* Product name */
            .shop-name {
                font-size: 18px;
                font-weight: bold;
                margin: 10px 0;
            }

            /* Product price */
            .shop-price {
                font-size: 16px;
                color: #28a745;
                margin-bottom: 10px;
            }

            /* Add to Cart button */
            .shop-btn {
                background: #007bff;
                color: #fff;
                padding: 10px;
                width: 100%;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-size: 16px;
            }

            .shop-btn:hover {
                background: #0056b3;
            } 

            /* Container */
            .z-container {
                display : none;
                position: relative;
                left : 300px;
                background-color: #fff;
                width: 600px;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            /* Title */
            .z-cart-title {
                text-align: center;
                font-size: 24px;
                margin-bottom: 20px;
            }

            /* Table */
            .z-cart-table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
            }

            .z-table-header {
                text-align: left;
                padding: 10px;
                background-color: #f2f2f2;
                font-weight: bold;
            }

            .z-cart-table td {
                padding: 10px;
                text-align: left;
                border-bottom: 1px solid #ddd;
            }

            .z-cart-table .z-item-name {
                font-weight: bold;
            }

            .z-cart-table .z-item-price, .z-cart-table .z-item-total {
                color: #4CAF50;
            }

            /* Total */
            .z-total {
                display: flex;
                justify-content: space-between;
                margin-bottom: 20px;
            }

            .z-total-label {
                font-weight: bold;
            }

            .z-total-amount {
                color: #333;
            }

            /* Pay Button */
            .z-pay-button {
                width: 100%;
                padding: 10px;
                background-color: #4CAF50;
                color: white;
                border: none;
                border-radius: 4px;
                font-size: 16px;
                cursor: pointer;
            }

            .z-pay-button:hover {
                background-color: #45a049;
            }
        </style>
    </head>
    <body>
        <div class="header">
            <div class="logo">
                <img class="logo" src="logo.png">
            </div>
            <button onclick="nav1()" class="btn1"><img src="bar.png"></button>
            <a href="#"><button id ="b" class="btn2" onclick="login_on()">Login</button></a>
            <a href="#"><button id= "c" class="btn3" onclick="signup_on()">Signup</button></a>
            <a href="#"><button id= "d" class="btn4" onclick="showcart()">Cart Page</button></a>
        </div>
        <div class="x-container" id="x">
            <h2 class="x-title">Signup</h2>
            <form>
              <input type="text" id = "name" class="x-input" placeholder="Full Name" required>
              <input type="text" id = "uname" class="x-input" placeholder="Username" required>
              <input type="email" id = "email" class="x-input" placeholder="Email" required>
              <input type="password" id="pwd" class="x-input" placeholder="Password" required>
              <button type="submit" class="x-button" onclick="signupuser(); return false;">Sign Up</button>
            </form>
          </div>
          <div class="y-container" id="y">
            <h2 class="y-title">Login</h2>
            <form>
              <input type="text" id="luname" class="y-input" placeholder="Username" required>
              <input type="password" id="lpwd" class="y-input" placeholder="Password" required>
              <button type="submit" class="y-button" onclick="loginuser()">Login</button>
            </form>
          </div>
          <div class="z-container" id="z-container">
            <h1 class="z-cart-title">Shopping Cart</h1>
            <table class="z-cart-table" id="cartTable">
                <thead>
                    <tr>
                        <th class="z-table-header">Product Name</th>
                        <th class="z-table-header">Price</th>
                    </tr>
                </thead>
                <tbody id="tc">
                </tbody>
            </table>
            <div class="z-total">
                <span class="z-total-label">Total:</span>
                <span class="z-total-amount" id="totalAmount"></span>
            </div>
            <button class="z-pay-button" id="rzp-button" onclick="pay()">Pay Now</button>
        </div>
          <div class="shop-container" id="shop-container">
            <h2>Shop Products</h2>
            <div class="shop-grid">
              <div class="shop-product">
                <img src="camera.png" class="shop-img" alt="Product 1">
                <div class="shop-name">Camera</div>
                <div class="shop-price">Rs 25000.00</div>
                <button class="shop-btn" onclick="addtocart(['camera',25000])">Add to Cart</button>
              </div>
          
              <div class="shop-product">
                <img src="strap.png" class="shop-img" alt="Product 2">
                <div class="shop-name">Camera Strap</div>
                <div class="shop-price">Rs 300.00</div>
                <button class="shop-btn" onclick="addtocart(['Camera strap',300])">Add to Cart</button>
              </div>
          
              <div class="shop-product">
                <img src="tripod.png" class="shop-img" alt="Product 3">
                <div class="shop-name">Tripod</div>
                <div class="shop-price">Rs 799.00</div>
                <button class="shop-btn" onclick="addtocart(['Tripod',799])">Add to Cart</button>
              </div>
          
              <div class="shop-product">
                <img src="bag.png" class="shop-img" alt="Product 4">
                <div class="shop-name">Camera Bag</div>
                <div class="shop-price">Rs 549.00</div>
                <button class="shop-btn" onclick="addtocart(['camera bag',549])">Add to Cart</button>
              </div>
            </div>
          </div>
    </body>
    <script>
        //Varibales
        var menu_bar = false; 
        var loginon = false;
        var signupon = false;
        var carton = false;
        var loginStatus = false;
        var userdetails = {
            user : ["User","user@gmail.com","user",[["Tripod",799]]]
        };
        var current_user = null;
        var total = 0;
        var razorpay_key = "rzp_test_RyZIITwpRrv7tS";
        // Functions
        function addtocart(data){
            if (loginStatus==false){
                alert("Please Login First");
            }
            else{
                userdetails[current_user][3].push(data);
                console.log(userdetails)
                alert("Product added to cart");
            }
        }
        function nav1(){
            var d1 = document.getElementById("b");
            var d2 = document.getElementById("c");
            var d3 = document.getElementById("d");
            if (menu_bar==false){
                //User Is trying to open the menu bar
                d1.style.display = "block";
                d2.style.display = "block";
                d3.style.display = "block";
                menu_bar = true;
            }
            else{
                //User is trying to close the menu bar
                d1.style.display = "none";
                d2.style.display = "none";
                d3.style.display = "none";
                menu_bar = false;
            }
        }
        function login_on(){
            d1 = document.getElementById("x"); //Signup
            d2 = document.getElementById("y"); //Login
            d3 = document.getElementById("z-container"); //Cart
            if (signupon==true){
                d1.style.display = "none";
                signupon = false;
            }
            if(carton==true){
                d3.style.display = "none";
                carton = false;
            }
            d2.style.display = "block";
            loginon = true;
        }
        function signup_on(){
            d1 = document.getElementById("x"); //Signup
            d2 = document.getElementById("y"); //Login
            d3 = document.getElementById("z-container"); //Cart
            if (carton == true){
                d3.style.display = "none";
                carton = false;
            }
            if (loginon == true){
                d2.style.display = "none";
                loginon = false;
            }
            d1.style.display = "block";
            signupon = true;
        }
        function showcart(){
            if (loginStatus==false){
                alert("Please Login First");
            }
            else{
                d1 = document.getElementById("x"); //Signup
                d2 = document.getElementById("y"); //Login
                d3 = document.getElementById("z-container"); //Cart
                if (signupon==true){
                    d1.style.display = "none";
                    signupon = false;
                }
                if(loginon==true){
                    d2.style.display = "none";
                    loginon = false;
                }
                d3.style.display = "block";
                carton = true;


                //Displaying Products on Table
                orders = userdetails[current_user][3];
                console.log(orders);

                for (var item of orders){
                    var x = document.createElement("tr");

                    var r1 = document.createElement("td");
                    r1.textContent = item[0];
                    x.appendChild(r1);

                    r2 = document.createElement("td");
                    r2.textContent = item[1];
                    x.appendChild(r2);

                    total = total + item[1];
                    document.getElementById("tc").appendChild(x);
                }
            }
            document.getElementById('totalAmount').innerHTML = total;
        }
        function signupuser(){
            uname = document.getElementById("uname").value;
            name = document.getElementById("name").value;
            email = document.getElementById("email").value;
            password = document.getElementById("pwd").value;
            //Validate the User - Existance of user
            var verifyuserstatus = false;
            for(var ele in userdetails){
                if (ele == uname){
                   verifyuserstatus = true;
                }
            }
            if (verifyuserstatus == true){
                alert("User Alread Exist with the username [ Try alternate username ]");
            }
            else{
                userdetails[uname] = []
                userdetails[uname].push(name);
                userdetails[uname].push(email);
                userdetails[uname].push(password);
                userdetails[uname].push([]);
                alert("User Signed up");
                document.getElementById("x").style.display = "none";
                signupon = false;
            }
        }
        function loginuser(){
            user_name = document.getElementById("luname").value;
            pass_word = document.getElementById("lpwd").value;
            //Validation of User
            var verifyloginstatus = false;
            for (var ele in userdetails){
                if (ele == user_name){
                    verifyloginstatus = true;
                    current_user = ele; 
                }
            }
            if (verifyloginstatus == false){
                alert("User Does not Exits");
            }
            else{
                if (userdetails[current_user][2] == pass_word){
                    loginStatus=true;
                    alert("User Logged in Successfully !");
                    document.getElementById('y').style.display = "none";
                    loginon = false;

                }
                else{
                    alert("Incorrect Passowrd");
                    verifyloginstatus = false;
                    current_user = null;
                }
            }
        }
        function pay(){
            var options = {
                key : razorpay_key,
                amount : total * 100,
                currency : "INR",
                description : "Payment for Camera Shop",
                image : "logo.png",
                handler : function(response){
                    alert("Payment Success !");
                    document.getElementById("z-container").style.display = "none";
                    carton = false;
                    userdetails[current_user][3] = [];
                },
                refill : {
                    contact : "7893570611"
                },
                theme : {
                    color : "green"
                }
            };
            document.getElementById("rzp-button").onclick = function (e){
                var rzp = new Razorpay(options);
                rzp.on("payment failed",function(){
                    alert("Payment Failed");
                })
                rzp.open();
            }
        }
    </script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</html>
